# 算术表达式

## + 操作符

1.   如果有一个操作数是对象，则+操作符使用对象到原始值的算法把该操作数转换为原始值。Date对象用 toString()方法来转换，其他所有对象通过valueOf()转换(如果这个方法返回原始值)。不过，多数对象并没有valueOf()方法，因此 它们也会通过toString()方法转换。
2.   完成对象到原始值的转换后，如果有操作数是字符串，另一个操作数也会被转换为字符串并进行拼接。
3.   否则，两个操作数都被转换为数值(或NaN)，计算加法。

由于BigInt值不能转换 为常规数值，因此这个操作符不应该用于BigInt。

## - 操作符

当-用作一元操作符时，它在必要时将操作数转换为数值，然后 改变结果的符号。

## `++` `--` 操作符

这个操作数必须是一个 左值(变量、数组元素或对象属性)。这个操作符将其操作数转换 为数值，在这个数值上加1，然后将递增后的数值再赋值回这个变 量、元素或属性。

如果位于操 作数前面，则可以称其为前递增操作符，即先递增操作数，再求值为该操作数递增后的值。如果位于操作数后面，则可以称其为后递增操作符，即它也会递增操作数，但仍然求值为该操作数未递增的值。看看下面两行代码，注意它们的差异：

```js
let i = 1, j = ++i;	// i 和 j 都是 2
let n = 1, m = n++;	// n 是 2，m 是 1
```

--操作符也期待左值操作数。它会将这个操作数转换为数值， 减1，然后把递减后的值再赋值给操作数。与++操作符类似，--返回 的值取决于它与操作数的相对位置。如果位于操作数前面，它递减 并返回递减后的值。如果位于操作数后面，它递减操作数，但返回 未递减的值。在位于操作数后面时，操作数与操作符之间不能有换 行符。

## 位操作符

位操作符期待整数操作数，而且将它们当成32位整数而非64位 浮点值。这些操作符必要时将它们的操作数转换为数值，然后再将 得到的数值强制转换为32位整数，即丢弃小数部分和第32位以外的 部分。移位操作符要求右侧操作数介于0到31之间。在把操作数转换 为无符号32位整数后，它们会丢弃第5位以外的位，得到一个近似相 等的数值。**令人惊讶的是，NaN、Infinity和-Infinity在作为这些 位操作符的操作数时都会转换为0。**

**除了>>>之外的所有位操作符都可以用于常规数据或BigInt。**

### 按位与 &

&操作符对其整数参数的每一位执行布尔与操作。只有两个操作 数对应的位都为1，结果中对应的位才为1。例如，0x1234 & 0x00FF 求值为0x0034。

### 按位或 |

|操作符对其整数参数的每一位执行布尔或操作。两个操作数中 对应的位都为1或有一个为1，结果中对应的位就为1。例如，0x1234 0x00FF求值为0x12FF。

### 按位异或 ^

^操作符对其整数参数的每一位执行布尔异或操作。异或的意思 就是要么操作数一为true，要么操作数二为true，二者不能同时为 true。两个操作数中对应的位只有一个为1，结果中对应的位就为 1。例如，0xFF00 ^ 0xF0F0求值为0x0FF0。

### 按位非 ~

~操作符是一元操作符，要出现在其操作数前面。按位非的结果 是反转操作数中的所有位。因为JavaScript表示有符号整数的方 式，对一个值应用~操作符等于修改其符号并减1。例如，~0x0F求值 为0xFFFFFFF0，即-16。

### 左移 <<

<<操作符将第一个操作数的所有位向左移动第二个操作数指定 的位数，第二个操作数应该是介于0到31之间的整数。例如，在a<<1 操作中，a的第1位变成第2位，a的第2位变成第3位，以此类推。新的第1位会填充0，第32位的值丢弃。将一个值左移1位等于这个值乘 以2，左移2位等于乘以4，以此类推。例如，7<<2求值为28。

### 右移 >>

\>>操作符将第一个操作数的所有位向右移动第二个操作数指定 的位数(介于0到31之间)。移出右边的位会被丢弃。填充到左边的 位取决于原始操作数的符号，以便结果保持相同的符号。如果第一 个操作数是正值，则结果的高位填充0;如果第一个操作数是负值， 则结果的高位填充1。将一个正值右移1位等于这个值除以2(丢弃余 数)，右移2位等于除以4，以此类推。例如，7>>1求值为3，-7 >> 1求值为-4。

### 零填充右移 >>>

\>>>操作符与>>操作符类似，只不过无论第一个操作数的符号是 什么，左侧移动的位始终填充0。如果想把有符号32位值看成无符号 整数，那可以使用这个操作符。例如，-1 >> 4求值为-1，而-1 >>> 4求值为0x0FFFFFFF。这是JavaScript中唯一一个不能用于BigInt的 位操作符。BigInt不像32位整数那样通过设置高位的方式表示负 值，这个操作符只对特定的补码表示有意义。

